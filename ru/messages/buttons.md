# Кнопки в сообщениях и чатах

## Инлайн-кнопки

Бот может оставить кнопки под своим сообщением.

Кнопки под сообщениями (они же inline keyboards или inline buttons) в основном бывают трёх видов:

- URL button — кнопка, которая работает как ссылка.
- Callback button. При нажатии на такую кнопку боту придёт апдейт. С созданием кнопки можно указать параметр, который
  будет указан в этом апдейте (до 64 байтов). Обычно после нажатия на такую кнопку пользователь ожидает какую-то
  обратную связь: боту следует изменить сообщение или показать notification или alert.
- Switch to inline button. Кнопка для переключения [в инлайн-режим](/ru/interaction/inline). Можно создать кнопку,
  открывающую инлайн в том же чате или открывающую меню для выбора чата. Также можно выбрать в кнопке запрос, который
  появится рядом с никнеймом бота при нажатии на кнопку (но пользователь сможет его отредактировать).

::: info Варианты кнопок, которые встречаются реже:

- Login URL button — специальная кнопка для авторизации пользователей на сайте.
  Использовалась, например, в официальном боте [@discussbot](https://t.me/discussbot) до появления
  в Telegram нативных комментариев.
- Callback game button — кнопка для открытия [HTML-игры](../interaction/html-games).
- Pay button — кнопка [для платежей](../interaction/payments).

:::

TODO: GIF

TODO: chck for upats

## Клавиатурные кнопки

Есть второй тип кнопок: keyboard buttons. Они отображаются вместо клавиатуры как подсказки. Нажав на такую кнопку,
пользователь отправит этот текст.

TODO: GIF

При этом в личных чатах с помощью кнопки можно:

- запросить номер телефона пользователя,
- запросить геолокацию пользователя,
- открыть у пользователя меню создания опроса.

Есть опция `resize_keyboard`, которая отвечает за то, изменять ли высоту этой «клавиатуры из кнопок».
По умолчанию она почему-то выключена, и клавиатура выглядит растянутой. Получаются кнопки как на этой картинке:

TODO: картинка

Чтобы показать клавиатурные кнопки, бот должен отправить сообщение.
Можно показать клавиатуру, которая свернётся (но не пропадёт) после нажатия на кнопку.

По умолчанию, если показать кнопки в группе, они будут видны всем пользователям. Но вместо этого можно показать только
для упоминаемых пользователей, то есть:

- для пользователей, юзернеймы которых были в тексте сообщения,
- и, если это ответ на другое сообщение, для пользователя, который его отправил.

## Как добавлять кнопки

Оба типа кнопок могут составлять несколько рядов, в каждом из которых по несколько кнопок. Ограничения: в ряду может
быть до 8 кнопок, а всего вместе с сообщением можно показать до 100 кнопок.

Отправляя сообщение, можно выбрать не более одного действия:

- добавить инлайн-кнопки,
- показать клавиатурные кнопки,
- убрать все клавиатурные кнопки,
- force reply: автоматически заставить пользователя ответить на сообщение. (Так произойдёт то же самое, что и при
  нажатии
  пользователем кнопки «Ответить». Это нужно для того, чтобы бот мог общаться с пользователями в группах, не нарушая
  Privacy mode. Мы не рекомендуем использовать force reply, потому что автоматические «ответы» на сообщения сбивают с
  толку участника чата.) todo: ссылка на privacy mode

К сожалению, во время отправки одного сообщения нельзя одновременно инлайн-кнопки и клавиатурные кнопки.
